# 安装指南

<cite>
**本文档中引用的文件**  
- [README.md](file://README.md)
- [pyproject.toml](file://pyproject.toml)
- [src/specify_cli/__init__.py](file://src/specify_cli/__init__.py)
- [AGENTS.md](file://AGENTS.md)
- [scripts/bash/check-prerequisites.sh](file://scripts/bash/check-prerequisites.sh)
- [scripts/powershell/check-prerequisites.ps1](file://scripts/powershell/check-prerequisites.ps1)
</cite>

## 目录
1. [简介](#简介)
2. [环境先决条件](#环境先决条件)
3. [安装方式](#安装方式)
4. [依赖项说明](#依赖项说明)
5. [安装验证](#安装验证)
6. [常见问题与解决方案](#常见问题与解决方案)
7. [自动化部署建议](#自动化部署建议)

## 简介
Spec-Kit 是一个支持规范驱动开发（Spec-Driven Development）的工具包，其核心组件 `specify-cli` 提供了项目初始化和管理功能。本指南详细介绍了 Spec-Kit 的两种安装方式：推荐的持久化安装和一次性使用方案，帮助用户根据需求选择最适合的安装方法。

**Section sources**
- [README.md](file://README.md#L45-L89)

## 环境先决条件
在安装 Spec-Kit 之前，必须确保系统满足以下先决条件：

- **操作系统**：Linux/macOS 或 Windows 上的 WSL2
- **Python 版本**：3.11 或更高版本
- **包管理工具**：`uv`（用于 Python 包管理）
- **版本控制**：Git
- **AI 代理**：支持的 AI 编码助手，如 Claude Code、GitHub Copilot、Gemini CLI、Cursor、Qwen Code、opencode、Codex CLI、Windsurf、Kilo Code、Auggie CLI 或 Roo Code

这些先决条件确保了 Spec-Kit 能够正常运行并与其他工具集成。

**Section sources**
- [README.md](file://README.md#L480-L490)

## 安装方式
Spec-Kit 提供了两种安装方式，用户可以根据使用场景选择合适的方案。

### 持久化安装（推荐）
持久化安装将 `specify-cli` 工具安装到系统的 PATH 中，使其在任何位置都可直接调用。这是推荐的安装方式，因为它提供了更好的工具管理和更简洁的 shell 配置。

```bash
uv tool install specify-cli --from git+https://github.com/github/spec-kit.git
```

安装完成后，可以直接使用 `specify` 命令：

```bash
specify init <PROJECT_NAME>
specify check
```

**持久化安装的优势**：
- 工具永久安装并可在 PATH 中访问
- 无需创建 shell 别名
- 可通过 `uv tool list`、`uv tool upgrade`、`uv tool uninstall` 进行更好的工具管理
- 更简洁的 shell 配置

**Section sources**
- [README.md](file://README.md#L45-L60)

### 一次性使用方案
一次性使用方案无需安装，直接通过 `uvx` 命令运行。这种方式适合临时使用或测试场景。

```bash
uvx --from git+https://github.com/github/spec-kit.git specify init <PROJECT_NAME>
```

此方法在每次运行时都会从源代码下载并执行，适合不想在系统中永久安装工具的用户。

**Section sources**
- [README.md](file://README.md#L62-L66)

## 依赖项说明
`pyproject.toml` 文件定义了 `specify-cli` 的依赖项，这些依赖项在安装过程中自动解析和安装。

```toml
[project]
name = "specify-cli"
version = "0.0.17"
description = "Specify CLI, part of GitHub Spec Kit. A tool to bootstrap your projects for Spec-Driven Development (SDD)."
requires-python = ">=3.11"
dependencies = [
    "typer",
    "rich",
    "httpx[socks]",
    "platformdirs",
    "readchar",
    "truststore>=0.10.4",
]
```

- **typer**：用于创建命令行界面
- **rich**：用于在终端中渲染富文本和表格
- **httpx[socks]**：用于发送 HTTP 请求，支持 SOCKS 代理
- **platformdirs**：用于确定平台特定的目录
- **readchar**：用于跨平台键盘输入
- **truststore**：用于 SSL/TLS 证书验证

这些依赖项确保了 `specify-cli` 的核心功能正常运行。

**Section sources**
- [pyproject.toml](file://pyproject.toml#L1-L10)

## 安装验证
安装完成后，可以通过以下步骤验证安装是否成功：

1. 运行 `specify --help` 查看帮助信息
2. 运行 `specify check` 检查系统要求
3. 初始化一个新项目：`specify init my-project`

如果这些命令能够正常执行并返回预期结果，则说明安装成功。

**Section sources**
- [README.md](file://README.md#L105-L110)

## 常见问题与解决方案
在安装过程中可能会遇到一些常见问题，以下是解决方案：

### 权限错误
如果在安装过程中遇到权限错误，可以尝试使用 `--user` 选项进行用户级安装：

```bash
uv tool install --user specify-cli --from git+https://github.com/github/spec-kit.git
```

### 依赖冲突
如果出现依赖冲突，可以尝试创建一个虚拟环境来隔离依赖：

```bash
uv venv
source .venv/bin/activate
uv tool install specify-cli --from git+https://github.com/github/spec-kit.git
```

### 网络问题
如果由于网络问题无法下载依赖，可以配置代理或使用镜像源：

```bash
uv pip install --proxy http://proxy-server:port package-name
```

**Section sources**
- [README.md](file://README.md#L500-L515)

## 自动化部署建议
对于自动化部署场景，建议使用脚本化安装方式。可以编写一个 shell 脚本或 PowerShell 脚本来自动化整个安装过程：

```bash
#!/bin/bash
# install-spec-kit.sh
uv tool install specify-cli --from git+https://github.com/github/spec-kit.git
specify check
echo "Spec-Kit 安装完成"
```

或者在 CI/CD 流程中使用：

```yaml
- name: Install Spec-Kit
  run: uv tool install specify-cli --from git+https://github.com/github/spec-kit.git
```

这种方式可以确保在不同环境中的一致性，并简化部署流程。

**Section sources**
- [scripts/bash/check-prerequisites.sh](file://scripts/bash/check-prerequisites.sh)
- [scripts/powershell/check-prerequisites.ps1](file://scripts/powershell/check-prerequisites.ps1)